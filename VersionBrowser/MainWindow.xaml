<Window x:Class="VersionBrowser.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="SolidWorks Version Control (Dark)" Height="700" Width="1200" 
        Background="#1E1E1E" Foreground="#D4D4D4">

    <Window.Resources>
        <Style x:Key="ScrollBarThumb" TargetType="{x:Type Thumb}">
            <Setter Property="OverridesDefaultStyle" Value="true"/>
            <Setter Property="IsTabStop" Value="false"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type Thumb}">
                        <Border x:Name="rectangle"
                            SnapsToDevicePixels="True"
                            Background="#444"
                            CornerRadius="4"
                            Height="{TemplateBinding Height}"
                            Width="{TemplateBinding Width}"/>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="true">
                                <Setter TargetName="rectangle" Property="Background" Value="#666"/>
                            </Trigger>
                            <Trigger Property="IsDragging" Value="true">
                                <Setter TargetName="rectangle" Property="Background" Value="#999"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style TargetType="{x:Type ScrollBar}">
            <Setter Property="Stylus.IsFlicksEnabled" Value="false"/>
            <Setter Property="Foreground" Value="#444"/>
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type ScrollBar}">
                        <Grid x:Name="GridRoot" Background="Transparent" SnapsToDevicePixels="true">
                            <Track x:Name="PART_Track" IsDirectionReversed="true" Focusable="false">
                                <Track.Thumb>
                                    <Thumb Style="{StaticResource ScrollBarThumb}"/>
                                </Track.Thumb>
                                <Track.IncreaseRepeatButton>
                                    <RepeatButton Command="ScrollBar.LineDownCommand" Opacity="0" Width="0" Height="0" Focusable="false"/>
                                </Track.IncreaseRepeatButton>
                                <Track.DecreaseRepeatButton>
                                    <RepeatButton Command="ScrollBar.LineUpCommand" Opacity="0" Width="0" Height="0" Focusable="false"/>
                                </Track.DecreaseRepeatButton>
                            </Track>
                        </Grid>

                        <ControlTemplate.Triggers>
                            <Trigger Property="Orientation" Value="Vertical">
                                <Setter Property="Width" Value="10"/>
                                <Setter Property="Height" Value="Auto"/>
                                <Setter TargetName="PART_Track" Property="IsDirectionReversed" Value="true"/>
                            </Trigger>
                            <Trigger Property="Orientation" Value="Horizontal">
                                <Setter Property="Width" Value="Auto"/>
                                <Setter Property="Height" Value="10"/>
                                <Setter TargetName="PART_Track" Property="IsDirectionReversed" Value="False"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style TargetType="{x:Type ScrollViewer}">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type ScrollViewer}">
                        <Grid x:Name="Grid" Background="{TemplateBinding Background}">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="*"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>

                            <ScrollContentPresenter x:Name="PART_ScrollContentPresenter" 
                                              CanContentScroll="{TemplateBinding CanContentScroll}" 
                                              CanHorizontallyScroll="False" 
                                              Grid.Column="0" Grid.Row="0" 
                                              Margin="{TemplateBinding Padding}" 
                                              Grid.ColumnSpan="2" Grid.RowSpan="2"/>

                            <ScrollBar x:Name="PART_VerticalScrollBar" 
                                 Grid.Column="1" Grid.Row="0" 
                                 Maximum="{TemplateBinding ScrollableHeight}" 
                                 ViewportSize="{TemplateBinding ViewportHeight}"
                                 Value="{Binding VerticalOffset, Mode=OneWay, RelativeSource={RelativeSource TemplatedParent}}"
                                 Visibility="{TemplateBinding ComputedVerticalScrollBarVisibility}" 
                                 Minimum="0"/>

                            <ScrollBar x:Name="PART_HorizontalScrollBar" 
                                 Grid.Column="0" Grid.Row="1" 
                                 Maximum="{TemplateBinding ScrollableWidth}" 
                                 ViewportSize="{TemplateBinding ViewportWidth}"
                                 Value="{Binding HorizontalOffset, Mode=OneWay, RelativeSource={RelativeSource TemplatedParent}}"
                                 Visibility="{TemplateBinding ComputedHorizontalScrollBarVisibility}" 
                                 Minimum="0" Orientation="Horizontal"/>

                            <Rectangle Grid.Column="1" Grid.Row="1" Fill="Transparent"/>

                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>

    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="300"/>
            <ColumnDefinition Width="350"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <Border Grid.Column="0" Background="#252526" BorderBrush="#333" BorderThickness="0,0,1,0">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

                <TextBlock Text="EXPLORER" Foreground="#888" FontWeight="Bold" Margin="15,15,0,10" FontSize="11"/>

                <TreeView Name="fileTree" Grid.Row="1" Background="Transparent" BorderThickness="0" 
                          Foreground="#D4D4D4" TreeViewItem.Expanded="fileTree_Expanded" SelectedItemChanged="fileTree_SelectedItemChanged">
                    <TreeView.ItemContainerStyle>
                        <Style TargetType="{x:Type TreeViewItem}">
                            <Setter Property="Foreground" Value="#D4D4D4"/>
                            <Setter Property="FontSize" Value="13"/>
                            <Setter Property="Padding" Value="2"/>
                            <Setter Property="IsExpanded" Value="{Binding IsExpanded, Mode=TwoWay}" />
                            <Setter Property="IsSelected" Value="{Binding IsSelected, Mode=TwoWay}" />
                            <Setter Property="FontWeight" Value="Normal" />
                            <Style.Triggers>
                                <Trigger Property="IsSelected" Value="True">
                                    <Setter Property="FontWeight" Value="Bold" />
                                    <Setter Property="Background" Value="#37373D"/>
                                </Trigger>
                            </Style.Triggers>
                        </Style>
                    </TreeView.ItemContainerStyle>

                    <TreeView.ItemTemplate>
                        <HierarchicalDataTemplate ItemsSource="{Binding Items}">
                            <StackPanel Orientation="Horizontal" Margin="0,2">
                                <TextBlock Text="{Binding Icon}" Margin="0,0,8,0" Foreground="{Binding IconColor}"/>
                                <TextBlock Text="{Binding Name}"/>
                            </StackPanel>
                        </HierarchicalDataTemplate>
                    </TreeView.ItemTemplate>
                </TreeView>
            </Grid>
        </Border>

        <Border Grid.Column="1" Background="#1E1E1E" BorderBrush="#333" BorderThickness="0,0,1,0">
            <DockPanel>
                <TextBlock Text="VERSION HISTORY" DockPanel.Dock="Top" FontWeight="Bold" Margin="20,15,0,10" Foreground="#888" FontSize="11"/>

                <ListBox Name="lstVersions" SelectionChanged="lstVersions_SelectionChanged" 
                         BorderThickness="0" Background="Transparent" ScrollViewer.HorizontalScrollBarVisibility="Hidden">
                    <ListBox.ItemContainerStyle>
                        <Style TargetType="ListBoxItem">
                            <Setter Property="Padding" Value="0"/>
                            <Setter Property="Margin" Value="0"/>
                            <Setter Property="Background" Value="Transparent"/>
                            <Setter Property="Template">
                                <Setter.Value>
                                    <ControlTemplate TargetType="ListBoxItem">
                                        <Border Background="{TemplateBinding Background}">
                                            <ContentPresenter />
                                        </Border>
                                    </ControlTemplate>
                                </Setter.Value>
                            </Setter>
                            <Style.Triggers>
                                <Trigger Property="IsSelected" Value="True">
                                    <Setter Property="Background" Value="#2D2D30"/>
                                </Trigger>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter Property="Background" Value="#252526"/>
                                </Trigger>
                            </Style.Triggers>
                        </Style>
                    </ListBox.ItemContainerStyle>

                    <ListBox.ItemTemplate>
                        <DataTemplate>
                            <Grid Margin="0">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="50"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>

                                <Grid Grid.Column="0">
                                    <Rectangle Width="1" HorizontalAlignment="Center" VerticalAlignment="Stretch" Fill="#444"/>
                                    <Ellipse Width="10" Height="10" Fill="#007ACC" Stroke="#1E1E1E" StrokeThickness="2" VerticalAlignment="Center" HorizontalAlignment="Center"/>
                                </Grid>

                                <StackPanel Grid.Column="1" Margin="5,15,10,15">
                                    <TextBlock Text="{Binding Name}" FontWeight="SemiBold" FontSize="14" Foreground="#EEE"/>
                                    <TextBlock Text="{Binding Date}" FontSize="12" Foreground="#888" Margin="0,2,0,0"/>
                                </StackPanel>
                            </Grid>
                        </DataTemplate>
                    </ListBox.ItemTemplate>
                </ListBox>
            </DockPanel>
        </Border>

        <Grid Grid.Column="2" Background="#1E1E1E">
            <Grid.RowDefinitions>
                <RowDefinition Height="*"/>
                <RowDefinition Height="250"/>
            </Grid.RowDefinitions>

            <Border Grid.Row="0" Margin="20" Background="#252526" BorderBrush="#333" BorderThickness="1" CornerRadius="5">
                <Grid>
                    <Image Name="imgPreview" Stretch="Uniform" Margin="10"/>
                    <TextBlock Name="txtNoPreview" Text="Select a version to preview" 
                               HorizontalAlignment="Center" VerticalAlignment="Center" Foreground="#555" Visibility="Visible"/>
                </Grid>
            </Border>

            <Grid Grid.Row="1" Margin="20,0,20,20">
                <Border Background="#252526" BorderBrush="#333" BorderThickness="1" CornerRadius="5">
                    <ScrollViewer VerticalScrollBarVisibility="Auto">
                        <TextBlock Name="txtData" Padding="15" FontFamily="Consolas" FontSize="12" 
                                   TextWrapping="Wrap" Foreground="#CCC" Text="Feature data will appear here..."/>
                    </ScrollViewer>
                </Border>

                <StackPanel Grid.Row="1" Orientation="Horizontal" HorizontalAlignment="Right" VerticalAlignment="Bottom" Margin="0,0,15,15">

                    <Button Name="btnBranch" Click="btnBranch_Click"
                            Margin="0,0,10,0"
                            Background="#444" Foreground="White" BorderThickness="0"
                            Padding="15,10" FontSize="13" FontWeight="Bold"
                            Content="⑂ Branch">
                        <Button.Resources>
                            <Style TargetType="Border">
                                <Setter Property="CornerRadius" Value="4"/>
                            </Style>
                        </Button.Resources>
                        <Button.ToolTip>
                            Create a new folder from this version to experiment safely.
                        </Button.ToolTip>
                    </Button>

                    <Button Name="btnRestore" Click="btnRestore_Click"
            Background="#007ACC" Foreground="White" BorderThickness="0"
            Padding="20,10" FontSize="13" FontWeight="Bold"
            Content="Open / Restore ➤">
                        <Button.Resources>
                            <Style TargetType="Border">
                                <Setter Property="CornerRadius" Value="4"/>
                            </Style>
                        </Button.Resources>
                    </Button>

                </StackPanel>
            </Grid>
        </Grid>
    </Grid>
</Window>